type Profile {
  name: String!
  avatar: String
  bio: String
  location: Location
}

enum VerificationStatus {
  PENDING_VERIFICATION
  VERIFIED
  DECLINED
}

type Location {
  type: String!
  coordinates: [Float!]!
  formattedAddress: String
  city: String
}

type BorrowerProfile {
  requestedAmount: Float
  loanPurpose: String
  creditScore: Int
  supportingDocs: [SupportingDoc]
  ratings: [Rating]
}

type SupportingDoc {
  type: String
  url: String
}

type Rating {
  stars: Int
  comment: String
  reviewer: User
  createdAt: String
}

type UserProfile {
  name: String!
  avatar: String
  bio: String
  location: Location
  email: String
  phone: String
  documentSubmitted: Boolean
  verificationStatus: VerificationStatus!
  verificationNote: String
}

type User {
  id: ID!
  name: String!
  phone: String
  role: String!
  avatar: String
  bio: String
  profile: Profile
  borrowerProfile: BorrowerProfile
  documentSubmitted: Boolean
  verificationStatus: VerificationStatus!
  verificationNote: String
  verifiedAt: String
}

type AdminUserDetail {
  id: ID!
  profile: Profile!
  phone: String!
  email: String
  role: String!
  documentSubmitted: Boolean!
  verificationStatus: VerificationStatus!
  createdAt: String!
  documents: UserDocuments
}

type UserDocuments {
  aadharCard: AadharCardDocs
  panCard: PanCardDocs
  selfie: SelfieDocs
}

type AadharCardDocs {
  frontImage: String
  backImage: String
  verified: Boolean
}

type PanCardDocs {
  image: String
  verified: Boolean
}

type SelfieDocs {
  image: String
  verificationCode: String
  verified: Boolean
}

extend type Query {
  getUserProfile: UserProfile!
  getBorrowers: [User!]!
  getPendingUsers(adminPassword: String!): [AdminUserDetail!]!
}

input UpdateProfileInput {
  name: String
  avatar: String
  bio: String
  email: String
  location: LocationInput
}

input LocationInput {
  coordinates: [Float!]!
  formattedAddress: String
  city: String
}

input UpdatePhoneInput {
  newPhone: String!
}

input VerifyPhoneUpdateInput {
  newPhone: String!
  otp: String!
}

extend type Mutation {
  updateProfile(input: UpdateProfileInput!): UserProfile
  requestPhoneUpdateOtp(input: UpdatePhoneInput!): Boolean!
  verifyPhoneUpdate(input: VerifyPhoneUpdateInput!): UserProfile!
  approveUser(userId: ID!, adminPassword: String!): User!
  declineUser(userId: ID!, note: String!, adminPassword: String!): User!
}