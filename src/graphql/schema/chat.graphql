type Message {
  id: ID!
  sender: User!
  content: String!
  imageUrl: String
  fileUrl: String
  fileName: String
  fileType: String
  sentAt: String!
}


type Chat {
  id: ID!
  participants: [User!]!
  messages(limit: Int): [Message!]!  # Add limit parameter
  createdAt: String!
  unreadCount: Int  # Add unreadCount field
}

extend type Query {
  getChats: [Chat!]!
  getChat(chatId: ID!): Chat
}

extend type Mutation {
  sendMessage(
    chatId: ID!
    content: String!
    imageUrl: String
    fileUrl: String
    fileName: String
    fileType: String
  ): Chat!
  createChat(participantIds: [ID!]!): Chat!
}

extend type Subscription {
  messageSent(chatId: ID!): Chat
  newChat(userId: ID!): Chat
}